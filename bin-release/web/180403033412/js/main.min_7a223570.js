function createBitmapByName(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e}var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,a){return new(i||(i=Promise))(function(s,r){function n(t){try{o(a.next(t))}catch(e){r(e)}}function h(t){try{o(a["throw"](t))}catch(e){r(e)}}function o(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(n,h)}o((a=a.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return a([t,e])}}function a(i){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,r&&(n=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[0,n.value]),i[0]){case 0:case 1:n=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(n=o.trys,!(n=n.length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){o.label=i[1];break}if(6===i[0]&&o.label<n[1]){o.label=n[1],n=i;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(i);break}n[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(a){i=[6,a],r=0}finally{s=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var s,r,n,h,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return h={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h},CommonScene=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createdonghua=function(t){var e=RES.getRes(t+"_ske_json"),i=RES.getRes(t+"_tex_json"),a=RES.getRes(t+"_tex_png"),s=new dragonBones.EgretFactory;s.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(e)),s.addTextureAtlasData(s.parseTextureAtlasData(i,a));var r=s.buildArmature(t),n=r.getDisplay();return dragonBones.WorldClock.clock.add(r),this.addChild(n),r.animation.gotoAndPlay(t),n},e.prototype.onTicker=function(t){this._time||(this._time=t);var e=t,i=e-this._time;return this._time=e,dragonBones.WorldClock.clock.advanceTime(i/1e3),!1},e}(egret.DisplayObjectContainer);__reflect(CommonScene.prototype,"CommonScene");var GameObject=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.update=function(t){},e}(egret.DisplayObjectContainer);__reflect(GameObject.prototype,"GameObject");var Scene051=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.initView,e),console.log("scene051"),e}return __extends(e,t),e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.initView(),[2]})})},e.prototype.initView=function(){var t=this,e=RES.getRes("streamsound 0_mp3");this._soundchannel=e.play(5,1),this.addEventListener(egret.Event.ENTER_FRAME,this.onTimeUpdate,this);var i=GameUtil.createBitmapByName("sky_png"),a=GameUtil.createBitmapByName("yun_png");this.addChild(i),i.width=this.stage.stageWidth,i.height=this.stage.stageHeight,this.addChild(a),a.x=.6*this.stage.stageWidth,a.y=.05*this.stage.stageHeight,a.scaleX=6,a.scaleY=6;var s=GameUtil.createBitmapByName("yunlianpai0001_png");this.addChild(s),s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2,s.x=this.stage.stageWidth/2,s.y=.5*this.stage.stageHeight,s.scaleX=this.stage.stageWidth/s.width*1.1,s.scaleY=this.stage.stageHeight/s.height*.25,egret.Tween.get(s,{loop:!0}).to({y:.45*this.stage.stageHeight},1500).wait(500).to({y:.5*this.stage.stageHeight},1500);var r=GameUtil.createBitmapByName("cao051_png");r.anchorOffsetX=r.width/2,r.x=this.stage.stageWidth/2,r.y=.5*this.stage.stageHeight,r.scaleX=this.stage.stageWidth/r.width*1.1,r.scaleY=this.stage.stageHeight/r.height*1,this.addChild(r),this._bear=this.createdonghua("bearmove"),this._bear.x=0-this._bear.width/2,this._bear.y=.8*this.stage.stageHeight,this._bear.scaleX=5,this._bear.scaleY=5,egret.Tween.get(this._bear).to({x:.2*this.stage.stageWidth},1e3).call(function(){t.removeChild(t._bear),t._bear=t.createdonghua("bear"),t._bear.x=.2*t.stage.stageWidth,t._bear.y=.8*t.stage.stageHeight,t._bear.scaleX=2.5,t._bear.scaleY=2.5,t.addChild(t._bear),t._zuiba=t.createdonghua("zuiba"),t._zuiba.x=t._bear.x-3*t._zuiba.width,t._zuiba.y=t._bear.y-.8*t._zuiba.height,t._zuiba.scaleX=t._zuiba.scaleY=3}),this._do=this.createdonghua("do"),this._do.anchorOffsetX=this._do.width/2,this._do.anchorOffsetY=this._do.height/2,this._do.x=.2*this.stage.stageWidth+this._bear.x+5*this._bear.width+.5*this.stage.stageWidth*1/3,this._do.y=.85*this.stage.stageHeight,this._do.scaleX=5,this._do.scaleY=5,this._re=this.createdonghua("re"),this._re.anchorOffsetX=this._re.width/2,this._re.anchorOffsetY=this._re.height/2,this._re.x=.2*this.stage.stageWidth+this._bear.x+5*this._bear.width+.5*this.stage.stageWidth*2/3,this._re.y=.85*this.stage.stageHeight,this._re.scaleX=5,this._re.scaleY=5,this._mi=this.createdonghua("mi"),this._mi.anchorOffsetX=this._mi.width/2,this._mi.anchorOffsetY=this._mi.height/2,this._mi.x=.2*this.stage.stageWidth+this._bear.x+5*this._bear.width+.5*this.stage.stageWidth*3/3,this._mi.y=.85*this.stage.stageHeight,this._mi.scaleX=5,this._mi.scaleY=5,this._flowers=this.createdonghua("flowers"),console.log(this._flowers),this._flowers.x=.5*this.stage.stageWidth,this._flowers.y=.88*this.stage.stageHeight,this._flowers.scaleX=this.stage.stageWidth/this._flowers.width*1.1,this._flowers.scaleY=this.stage.stageHeight/this._flowers.height*.55,this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandler,this),egret.startTick(this.onTicker,this)},e.prototype.onTimeUpdate=function(){this._soundchannel.position>9&&(this._soundchannel.stop(),this._soundchannel=null,this._zuiba.parent&&this.removeChild(this._zuiba),this.removeEventListener(egret.Event.ENTER_FRAME,this.onTimeUpdate,this))},e.prototype.touchHandler=function(t){switch(t.type){case egret.TouchEvent.TOUCH_MOVE:break;case egret.TouchEvent.TOUCH_BEGIN:this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchHandler,this),this.stage.once(egret.TouchEvent.TOUCH_END,this.touchHandler,this),this.checkCollision(t.stageX,t.stageY);break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchHandler,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandler,this)}},e.prototype.checkCollision=function(t,e){var i=this._do.hitTestPoint(t,e),a=this._re.hitTestPoint(t,e),s=this._mi.hitTestPoint(t,e);if(i&&this._do.parent){var r=this._do.x,n=this._do.y;this.removeChild(this._do),this._do=this.createdonghua("do_hover"),this._do.anchorOffsetX=.45*this._do.width,this._do.anchorOffsetY=this._do.height/2,this._do.x=r,this._do.y=n,this._do.scaleX=5,this._do.scaleY=5,this.addChild(this._do)}else{var r=this._do.x,n=this._do.y;this.removeChild(this._do),this._do=this.createdonghua("do"),this._do.anchorOffsetX=this._do.width/2,this._do.anchorOffsetY=this._do.height/2,this._do.x=r,this._do.y=n,this._do.scaleX=5,this._do.scaleY=5,this.addChild(this._do)}if(a&&this._re.parent){var r=this._re.x,n=this._re.y;this.removeChild(this._re),this._re=this.createdonghua("re_hover"),this._re.anchorOffsetX=.38*this._re.width,this._re.anchorOffsetY=this._re.height/2,this._re.x=r,this._re.y=n,this._re.scaleX=5,this._re.scaleY=5,this.addChild(this._re)}else{var r=this._re.x,n=this._re.y;this.removeChild(this._re),this._re=this.createdonghua("re"),this._re.anchorOffsetX=.5*this._re.width,this._re.anchorOffsetY=this._re.height/2,this._re.x=r,this._re.y=n,this._re.scaleX=5,this._re.scaleY=5,this.addChild(this._re)}if(s&&this._mi.parent){var r=this._mi.x,n=this._mi.y;this.removeChild(this._mi),this._mi=this.createdonghua("mi_hover"),this._mi.anchorOffsetX=.2*this._mi.width,this._mi.anchorOffsetY=this._mi.height/2,this._mi.x=r,this._mi.y=n,this._mi.scaleX=5,this._mi.scaleY=5,this.addChild(this._mi)}else{var r=this._mi.x,n=this._mi.y;this.removeChild(this._mi),this._mi=this.createdonghua("mi"),this._mi.anchorOffsetX=this._mi.width/2,this._mi.anchorOffsetY=this._mi.height/2,this._mi.x=r,this._mi.y=n,this._mi.scaleX=5,this._mi.scaleY=5,this.addChild(this._mi)}},e}(CommonScene);__reflect(Scene051.prototype,"Scene051");var GameUtil=function(){function t(){}return t.createButton=function(t){var e=new egret.DisplayObjectContainer,i=createBitmapByName("button_png"),a=this.createText(t);return e.addChild(i),e.addChild(a),a.x=i.width/2,a.y=i.height/2,e.touchEnabled=!0,e.touchChildren=!1,e.anchorOffsetX=i.width/2,e.anchorOffsetY=i.height/2,e},t.createText=function(t){var e=new egret.TextField;return e.text=t,e.size=120,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e},t.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},t}();__reflect(GameUtil.prototype,"GameUtil");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var GameScene=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.initView,e),e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClickView,e),e}return __extends(e,t),e.prototype.initView=function(){var t=createBitmapByName("bg_png");t.width=this.stage.stageWidth,t.height=this.stage.stageHeight,this.addChild(t),this.UIContainer=new egret.DisplayObjectContainer,this.rolerContainer=new egret.DisplayObjectContainer,this.barrierContainer=new egret.DisplayObjectContainer,this.mileageContainer=new egret.DisplayObjectContainer,this.startGameContianer=new egret.DisplayObjectContainer,this.addChild(this.barrierContainer),this.addChild(this.mileageContainer),this.addChild(this.rolerContainer),this.addChild(this.UIContainer),this.addChild(this.startGameContianer),this.gameObjectList=[],this.deleteObjectList=[],this.initUIContainer(),this.initStartGameContainer(),this.createRole(),this.createMileage()},e.prototype.initUIContainer=function(){var t=new egret.TextField;t.text="分数:",t.textColor=16777215,t.size=60,t.x=50,t.y=20,this.UIContainer.addChild(t),this.barrierText=new egret.TextField,this.barrierText.size=60,this.barrierText.x=t.width+50,this.barrierText.y=20,this.UIContainer.addChild(this.barrierText),this.changeBarriersCount(0);var e=new egret.TextField;e.text="鸟蛋",e.textColor=16777215,e.size=60,e.x=this.barrierText.x+this.barrierText.width+50,e.y=20,this.UIContainer.addChild(e),this.eggText=new egret.TextField,this.eggText.textColor=16777215,this.eggText.size=60,this.eggText.x=e.x+e.width+50,this.eggText.y=20,this.UIContainer.addChild(this.eggText),this.changeEggsCount(0);var i=createBitmapByName("pause_png");i.touchEnabled=!0,i.x=this.stage.stageWidth-i.width-20,i.y=20,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPause,this),this.UIContainer.addChild(i)},e.prototype.changeBarriersCount=function(t){this.barrierText.text=t.toString()},e.prototype.changeEggsCount=function(t){this.eggText.text=t.toString()},e.prototype.onPause=function(t){t.stopPropagation(),SceneController.pauseGame(),console.log("游戏暂停")},e.prototype.createRole=function(){this.platfrom_bird=createBitmapByName("platform_png"),this.platfrom_bird.x=100,this.platfrom_bird.y=this.stage.stageHeight/2,this.rolerContainer.addChild(this.platfrom_bird),GameData.player=new Player,GameData.player.x=this.platfrom_bird.x,GameData.player.y=this.platfrom_bird.y-GameData.player.height,this.rolerContainer.addChild(GameData.player)},e.prototype.initStartGameContainer=function(){var t=new egret.TextField;t.text="准备",t.size=100,t.textColor=16753920,t.stroke=5,t.strokeColor=0,t.x=(this.stage.stageWidth-t.width)/2,t.y=this.stage.stageHeight/5,this.startGameContianer.addChild(t);var e=createBitmapByName("hand_png");e.x=(this.stage.stageWidth-e.width)/2,e.y=this.stage.stageHeight/5*3,this.startGameContianer.addChild(e);var i=new egret.TextField;i.text="点击开始游戏",i.size=80,i.textColor=0,i.stroke=3,i.strokeColor=16777215,i.x=(this.stage.stageWidth-i.width)/2,i.y=this.stage.stageHeight/5*4,this.startGameContianer.addChild(i)},e.prototype.onClickView=function(){return GameData.hasStart||GameData.isAlive?GameData.hasStart?void GameData.player.jump():void SceneController.startGame():void SceneController.startGameScene()},e.prototype.startGame=function(){var t=this;console.log("点击了界面，准备开始游戏"),this.startGameContianer.visible=!1,egret.Tween.get(this.platfrom_bird).to({x:-this.platfrom_bird.width},300).call(function(){t.rolerContainer.removeChild(t.platfrom_bird)})},e.prototype.createMileage=function(){var t=createBitmapByName("floor_png");t.y=this.stage.stageHeight-t.height+20,this.mileageContainer.addChild(t),this.mileage1=t;var e=createBitmapByName("floor_png");e.y=this.stage.stageHeight-e.height+20,e.x=t.width,console.log(e.x),this.mileageContainer.addChild(e),this.mileage2=e,GameData.groundHeight=t.y},e.prototype.startTicker=function(){egret.ticker.$startTick(this.update,this)},e.prototype.stopTicker=function(){egret.ticker.$stopTick(this.update,this)},e.prototype.update=function(t){if(!GameData.hasStart)return!0;this.mileage1.x+this.mileage1.width<=0&&(this.mileage1.x=this.mileage2.x+this.mileage2.width),this.mileage2.x+this.mileage2.width<=0&&(this.mileage2.x=this.mileage1.x+this.mileage1.width),this.mileage1.x-=GameData.speed,this.mileage2.x-=GameData.speed,GameData.distance+=GameData.speed/2,GameData.player.update(t);for(var e=0,i=this.gameObjectList;e<i.length;e++){var a=i[e];a.update(t)}return this.addElement(),this.collision(),!0},e.prototype.addElement=function(){var t=GameData.elements[0];if(t&&GameData.distance>=t.distance+GameData.rounds*GameData.maxMileage){if("wall"==t.type){console.log("创建wall");var e=new Barrier(t);e.x=this.stage.stageWidth,this.barrierContainer.addChild(e),this.gameObjectList.push(e)}if("egg"==t.type){console.log("创建egg");var i=new Egg(t);i.x=this.stage.stageWidth,i.y=t.y,this.barrierContainer.addChild(i),this.gameObjectList.push(i)}GameData.elements.splice(0,1),GameData.elements.length<=0&&(GameData.elements=GameData.elements.concat(RES.getRes("config_json").elements),console.log(RES.getRes("config_json")),GameData.rounds++)}},e.prototype.collision=function(){for(var t=GameData.player,e=new egret.Rectangle(t.x,t.y,t.width,t.height),i=0,a=this.gameObjectList;i<a.length;i++){var s=a[i];if(s instanceof Barrier){var r=new egret.Rectangle(s.x,0,s.barrier_up.width,s.barrier_down.y-GameData.barrierWidth),n=new egret.Rectangle(s.x,s.barrier_down.y,s.barrier_down.width,s.barrier_down.height);(e.intersects(r)||e.intersects(n))&&(s.hasTrigger=!0,GameData.player.death(),SceneController.GameEnd()),s.x+s.barrier_up.width<t.x+10&&!s.isScroce&&(s.isScroce=!0,GameData.barrierCount++,this.changeBarriersCount(GameData.barrierCount)),s.x+s.barrier_up.width+50<0&&this.deleteObjectList.push()}if(s instanceof Egg){var h=new egret.Rectangle(s.x,s.y,s.width,s.height);h.intersects(e)&&!s.hasTrigger&&(s.hasTrigger=!0,GameData.eggCount++,this.changeEggsCount(GameData.eggCount),this.deleteObjectList.push(s)),s.x+s.width+50<0&&this.deleteObjectList.push(s)}for(var o=0,c=this.deleteObjectList;o<c.length;o++){var g=c[o];this.barrierContainer.removeChild(g),this.gameObjectList.splice(this.gameObjectList.indexOf(g),1)}this.deleteObjectList.length=0}},e}(egret.DisplayObjectContainer);__reflect(GameScene.prototype,"GameScene");var OverScene=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.initView,e),e}return __extends(e,t),e.prototype.initView=function(){var t=createBitmapByName("hand_png");t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x=this.stage.stageWidth/2,t.y=this.stage.stageHeight/2,this.addChild(t);var e=new egret.TextField;e.text="点击重新游戏",e.size=100,e.stroke=8,e.strokeColor=0,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x=this.stage.stageWidth/2,e.y=2*this.stage.stageHeight/3,this.addChild(e);var i=GameUtil.createButton("菜单");i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){console.log("菜单"),SceneController.initGame()},this),i.x=this.stage.stageWidth/2,i.y=this.stage.stageHeight/5,this.addChild(i);var a=GameUtil.createButton("分享");a.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){console.log("分享")},this),a.x=this.stage.stageWidth/2,a.y=2*this.stage.stageHeight/5,this.addChild(a)},e}(egret.DisplayObjectContainer);__reflect(OverScene.prototype,"OverScene");var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this.loadResource()];case 1:return e.sent(),this.createGameScene(),[4,platform.login()];case 2:return e.sent(),[4,platform.getUserInfo()];case 3:return t=e.sent(),console.log(t),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 2:return i.sent(),[4,RES.loadGroup("lesson052",0,t)];case 3:return i.sent(),this.stage.removeChild(t),[3,5];case 4:return e=i.sent(),console.error(e),[3,5];case 5:return[2]}})})},e.prototype.createGameScene=function(){var t=new egret.DisplayObjectContainer;this.addChild(t),SceneController.instance.setStage(t),SceneController.initGame()},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var SceneController=function(){function t(){this.startScene=new StartScene,this.gameScene=new GameScene,this.overScene=new OverScene,this.Scene051=new Scene051}return Object.defineProperty(t,"instance",{get:function(){return this.sceneController||(this.sceneController=new t),this.sceneController},enumerable:!0,configurable:!0}),t.prototype.setStage=function(t){this._stage=t},t.initGame=function(){var t=this.instance._stage;this.instance.gameScene.parent&&(t.removeChild(this.instance.gameScene),this.instance.gameScene=new GameScene),this.instance.overScene.parent&&(t.removeChild(this.instance.overScene),this.instance.overScene=new OverScene),t.addChild(this.instance.startScene)},t.startGameScene=function(){var t=this.instance._stage;this.instance.startScene.parent&&(t.removeChild(this.instance.startScene),this.instance.startScene=new StartScene),this.instance.gameScene.parent&&(t.removeChild(this.instance.gameScene),this.instance.gameScene=new GameScene),this.instance.overScene.parent&&(t.removeChild(this.instance.overScene),this.instance.overScene=new OverScene),GameData.distance=0,GameData.barrierCount=0,GameData.eggCount=0,GameData.isAlive=!0,this.loadLevelData(),GameData.elements=GameData.elements.concat(),t.addChild(this.instance.gameScene)},t.startGame=function(){GameData.hasStart=!0,this.instance.gameScene.startGame(),this.instance.gameScene.startTicker()},t.loadLevelData=function(){var t=RES.getRes("config_json");GameData.elements=t.elements,GameData.speed=t.properties.speed/1920*egret.MainContext.instance.stage.stageHeight,GameData.gravity=t.properties.gravity/1920*egret.MainContext.instance.stage.stageHeight,GameData.jumpSpeed=t.properties.jumpSpeed/1920*egret.MainContext.instance.stage.stageHeight,GameData.barrierWidth=t.properties.barrierWidth,GameData.maxMileage=t.properties.maxMileage},t.GameEnd=function(){GameData.hasStart=!1,this.instance.gameScene.stopTicker();var t=this.instance._stage;t.addChild(this.instance.overScene)},t.pauseGame=function(){GameData.ispause?(egret.ticker.resume(),GameData.ispause=!1):(egret.ticker.pause(),GameData.ispause=!0)},t.Scene051=function(){var t=this.instance._stage;this.instance.startScene.parent&&t.removeChild(this.instance.startScene),this.instance.gameScene.parent&&t.removeChild(this.instance.gameScene),this.instance.overScene.parent&&t.removeChild(this.instance.overScene),t.addChild(this.instance.Scene051)},t}();__reflect(SceneController.prototype,"SceneController");var StartScene=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.initView,e),e}return __extends(e,t),e.prototype.initView=function(){var t=this,e=RES.getRes("streamsound 0_mp3");this._soundchannel=e.play(0,1),this.addEventListener(egret.Event.ENTER_FRAME,this.onTimeUpdate,this);var i=GameUtil.createBitmapByName("sky_png"),a=GameUtil.createBitmapByName("yun_png");this.addChild(i),i.width=this.stage.stageWidth,i.height=this.stage.stageHeight,this.addChild(a),a.x=.5*this.stage.stageWidth,a.y=.05*this.stage.stageHeight,a.scaleX=6,a.scaleY=6,egret.Tween.get(a,{loop:!0}).to({x:.8*this.stage.stageWidth},3e3).wait(500).to({x:.5*this.stage.stageWidth},3e3);var s=GameUtil.createBitmapByName("button0001_png");this.addChild(s),s.x=3*(this.stage.stageWidth-s.width)/4,s.y=(this.stage.stageHeight-s.height)/2,s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2,s.scaleX=2.5,s.scaleY=2.5,s.touchEnabled=!0,s.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){console.log("点击了开始游戏按钮，进入游戏场景"),t.removeChild(t._bear),t._zuiba.parent&&t.removeChild(t._zuiba),t._bear=t.createdonghua("bearmove"),t._bear.x=t.stage.stageWidth/3,t._bear.y=.8*t.stage.stageHeight,t._bear.scaleX=5,t._bear.scaleY=5,egret.Tween.get(t._bear).to({x:t.stage.stageWidth},3e3).call(function(){t.removeChild(t._bear),SceneController.Scene051()}),egret.Tween.get(s).to({scaleX:5,scaleY:5,alpha:.3},1500,egret.Ease.sineIn).call(function(){t.removeChild(s)})},this);var r=this.createdonghua("mogu");r.x=3*(this.stage.stageWidth-r.width)/4-.5*r.width,r.y=(this.stage.stageHeight-s.height)/2-3*r.height,r.scaleX=5,r.scaleY=5,this.swapChildren(s,r);var n=this.createdonghua("dashu");n.scaleX=this.stage.stageWidth/n.width*.45,n.scaleY=this.stage.stageHeight/n.height*.65,n.x=n.width*n.scaleX*.5,n.y=n.height*n.scaleY*.5;var h=this.createdonghua("caodi");h.x=this.stage.stageWidth/2,h.y=.8*this.stage.stageHeight,h.scaleX=this.stage.stageWidth/h.width*1.1,h.scaleY=this.stage.stageHeight/h.height*.5,this._bear=this.createdonghua("bear"),this._bear.x=this.stage.stageWidth/3,this._bear.y=.8*this.stage.stageHeight,this._bear.scaleX=2.5,this._bear.scaleY=2.5,this.addjiaoyin(),this._zuiba=this.createdonghua("zuiba"),this._zuiba.x=this._bear.x-3*this._zuiba.width,this._zuiba.y=this._bear.y-.8*this._zuiba.height,this._zuiba.scaleX=this._zuiba.scaleY=3,egret.startTick(this.onTicker,this)},e.prototype.onTimeUpdate=function(){this._soundchannel.position>5&&(this._soundchannel.stop(),this._soundchannel=null,this._zuiba.parent&&this.removeChild(this._zuiba),this.removeEventListener(egret.Event.ENTER_FRAME,this.onTimeUpdate,this))},e.prototype.addjiaoyin=function(){var t=this.getjiaoyin(1/9,"jiaoyinleft_png",!0),e=this.getjiaoyin(2/9,"jiaoyinright_png",!1),i=this.getjiaoyin(3/9,"jiaoyinleft_png",!0),a=this.getjiaoyin(4/9,"jiaoyinright_png",!1),s=this.getjiaoyin(5/9,"jiaoyinleft_png",!0),r=this.getjiaoyin(6/9,"jiaoyinright_png",!1),n=this.getjiaoyin(7/9,"jiaoyinleft_png",!0),h=this.getjiaoyin(8/9,"jiaoyinright_png",!1);this.addEventListener(egret.Event.ENTER_FRAME,function o(){this._bear.x>1*this.stage.stageWidth/9&&!t.parent&&this.addChild(t),this._bear.x>2*this.stage.stageWidth/9&&!e.parent&&this.addChild(e),this._bear.x>3*this.stage.stageWidth/9&&!i.parent&&this.addChild(i),this._bear.x>4*this.stage.stageWidth/9&&!a.parent&&this.addChild(a),this._bear.x>5*this.stage.stageWidth/9&&!s.parent&&this.addChild(s),this._bear.x>6*this.stage.stageWidth/9&&!r.parent&&this.addChild(r),this._bear.x>7*this.stage.stageWidth/9&&!n.parent&&this.addChild(n),this._bear.x>8*this.stage.stageWidth/9&&!h.parent&&(this.addChild(h),this.removeEventListener(egret.Event.ENTER_FRAME,o,this))},this)},e.prototype.getjiaoyin=function(t,e,i){var a=GameUtil.createBitmapByName(e);return a.y=.8*this.stage.stageHeight+this._bear.height/2+(i?-a.height:a.height),a.x=this.stage.stageWidth*t-this._bear.width/2,a.scaleX=a.scaleY=2,a},e}(CommonScene);__reflect(StartScene.prototype,"StartScene");var GameData=function(){function t(){}return t.elements=[],t.rounds=0,t}();__reflect(GameData.prototype,"GameData");var Barrier=function(t){function e(e){var i=t.call(this)||this;return i._barrierData=e,i.hasTrigger=!1,i.isScroce=!1,i.createBarrier(),i}return __extends(e,t),e.prototype.createBarrier=function(){var t=this._barrierData;this.barrier_down=createBitmapByName("polebot_png"),this.barrier_down.anchorOffsetX=this.barrier_down.width/2,this.barrier_down.y=t.y,this.addChild(this.barrier_down),this.barrier_up=createBitmapByName("polebot_png"),this.barrier_up.anchorOffsetX=this.barrier_up.width/2,this.barrier_up.y=this.barrier_down.y-GameData.barrierWidth,this.barrier_up.rotation=180,this.addChild(this.barrier_up)},e.prototype.update=function(t){this.x-=GameData.speed},e}(GameObject);__reflect(Barrier.prototype,"Barrier");var Egg=function(t){function e(e){var i=t.call(this)||this;return i.hasTrigger=!1,i.eggData=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){var t=createBitmapByName("egg_png");this.addChild(t)},e.prototype.update=function(t){this.x-=GameData.speed},e}(GameObject);__reflect(Egg.prototype,"Egg");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var Player=function(t){function e(){var e=t.call(this)||this;return e.acceleration=0,e.init(),e}return __extends(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._role.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._role.height},enumerable:!0,configurable:!0}),e.prototype.init=function(){this._role=createBitmapByName("player_png"),this.addChild(this._role),this.jump_img=createBitmapByName("jump_png"),this.jump_img.visible=!1,this.addChild(this.jump_img),this.death_img=createBitmapByName("death_png"),this.death_img.visible=!1,this.addChild(this.death_img)},e.prototype.jump=function(){var t=this;GameData.isAlive&&(this.acceleration=-GameData.jumpSpeed,this.jump_img.x=(this.width-this.jump_img.width)/2,this.jump_img.y=this.height,this.jump_img.visible=!0,egret.setTimeout(function(){t.jump_img.visible=!1},this,100))},e.prototype.death=function(t){var e=this;void 0===t&&(t=!1),GameData.isAlive=!1,t||(this.death_img.x=(this.width-this.jump_img.width)/2,this.death_img.y=-this.death_img.height,this.death_img.visible=!0,egret.setTimeout(function(){e.death_img.visible=!1},this,500))},e.prototype.update=function(t){this.y+=this.acceleration,this.acceleration+=GameData.gravity,this.y+this._role.height>GameData.groundHeight&&(this.death(!0),SceneController.GameEnd(),console.log("游戏结束"))},e}(GameObject);__reflect(Player.prototype,"Player");